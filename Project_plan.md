# å¤šå¸‚åœºè¶‹åŠ¿ä¸Žæ³¢åŠ¨é¢„æµ‹ç³»ç»Ÿï¼ˆBTC + ä¸­å›½Aè‚¡ + ç¾Žè‚¡ï¼‰
**å¤šæ—¶é—´æ¡†æž¶è¾“å‡º**ï¼šæ–¹å‘æ¦‚çŽ‡ + å¯åŠ¨çª—å£æ¦‚çŽ‡ + å¹…åº¦/æ”¶ç›ŠçŽ‡åŒºé—´

---

## 1ï¼‰ä¸€å¥è¯èŒƒå›´ï¼ˆScope Lockï¼‰
æž„å»ºä¸€ä¸ªç«¯åˆ°ç«¯é¢„æµ‹ç³»ç»Ÿï¼Œä¸»è¦é¢å‘åŠ å¯†å¸‚åœºï¼ˆä¼˜å…ˆ Top 3ï¼šBTCã€ETHã€SOLï¼‰ï¼Œå¹¶è®¾è®¡å¯æ‰©å±•æž¶æž„ä»¥æ”¯æŒä¸­å›½ A è‚¡ä¸Žç¾Žè‚¡ã€‚ç³»ç»Ÿåœ¨ **å°æ—¶çº§ï¼ˆ1â€“4hï¼‰** ä¸Ž **æ—¥çº¿çº§ï¼ˆ1â€“7dï¼‰** ä¸¤ä¸ªæ—¶é—´å°ºåº¦ä¸Šè¾“å‡º **æ–¹å‘æ¦‚çŽ‡**ã€**å¯åŠ¨çª—å£æ¦‚çŽ‡** ä¸Ž **å¹…åº¦/æ”¶ç›ŠçŽ‡åŒºé—´**ï¼Œå¹¶é€šè¿‡ Dashboard å±•ç¤ºç»“æžœï¼›å…¨æµç¨‹é‡‡ç”¨ä¸¥æ ¼çš„ **walk-forward** æ—¶é—´åºåˆ—è¯„ä¼°ï¼Œå¹¶æä¾›å¯å¤çŽ°çš„æ•°æ®æµæ°´çº¿ä¸Žè®­ç»ƒæµç¨‹ã€‚

---

## 2ï¼‰åŠ¨æœºï¼ˆWhy this projectï¼‰
åœ¨å¿«é€Ÿå˜åŒ–çš„å¸‚åœºä¸­ï¼Œä»…å›žç­”â€œæ˜Žå¤©æ¶¨è¿˜æ˜¯è·Œâ€ä¸å¤Ÿã€‚äº¤æ˜“è€…/åˆ†æžè€…æ›´å…³æ³¨ï¼š

- **æ–¹å‘ï¼ˆDirectionï¼‰**ï¼šä¸Šæ¶¨ vs ä¸‹è·Œçš„æ¦‚çŽ‡
- **æ—¶æœºï¼ˆTimingï¼‰**ï¼šæ˜¾è‘—è¡Œæƒ…æ›´å¯èƒ½åœ¨ä»€ä¹ˆæ—¶å€™å¼€å§‹
- **å¹…åº¦ï¼ˆMagnitudeï¼‰**ï¼šå¯èƒ½èµ°å¤šè¿œï¼ˆåŒºé—´æ¯”å•ç‚¹æ›´å®žç”¨ï¼‰

æœ¬é¡¹ç›®å°†æž„å»ºä¸€ä¸ªå¯å¤çŽ°ç³»ç»Ÿï¼Œåœ¨å¤šä¸ªé¢„æµ‹çª—å£ä¸ŠåŒæ—¶å›žç­”ä¸Šè¿°ä¸‰ä¸ªé—®é¢˜ï¼Œå¹¶ç”¨ä¸¥æ ¼è¯„ä¼°ä¿è¯ç»“è®ºå¯ä¿¡ã€‚

---

## 3ï¼‰äº¤ä»˜ç‰©ï¼ˆDeliverablesï¼‰
### ç«¯åˆ°ç«¯ã€å¯å¤çŽ°ç³»ç»Ÿ
- æ•°æ®æŽ¥å…¥ + å¢žé‡æ›´æ–°ï¼ˆå¯é‡å¤æ‰§è¡Œï¼‰
- æ•°æ®éªŒè¯ + æ•°æ®è´¨é‡æŠ¥å‘Šï¼ˆdata_quality_reportï¼‰
- ç‰¹å¾å·¥ç¨‹æ¨¡å—ï¼ˆconfig é©±åŠ¨ï¼‰
- æ ‡ç­¾ç”Ÿæˆï¼ˆæ–¹å‘ / å¯åŠ¨çª—å£ / å¹…åº¦ï¼‰
- æ¨¡åž‹è®­ç»ƒ + è°ƒå‚ + walk-forward è¯„ä¼°
- ä¿å­˜æ¨¡åž‹äº§ç‰©ï¼ˆåŒ…å« config å¿«ç…§ + metrics + ç‰ˆæœ¬å·/æ—¶é—´æˆ³ï¼‰
- Dashboardï¼ˆé¢„æµ‹ + åŒºé—´ + è¡¨çŽ° + baseline å¯¹æ¯”ï¼‰

---

## 4ï¼‰é—®é¢˜å»ºæ¨¡ï¼ˆä¸‰ä¸ªä»»åŠ¡ï¼‰
å°æ—¶çº§ä¸Žæ—¥çº¿çº§é‡‡ç”¨**åŒæ ·çš„ä¸‰ç±»ä»»åŠ¡**ï¼Œåªæ˜¯æ—¶é—´å•ä½ä¸åŒã€‚

### ä»»åŠ¡ 1ï¼šæ–¹å‘é¢„æµ‹ï¼ˆDirection Classificationï¼‰
å¯¹é¢„æµ‹çª—å£ `h` å®šä¹‰æœªæ¥æ”¶ç›ŠçŽ‡ï¼š
- `r(t,h) = (Close[t+h] - Close[t]) / Close[t]`

æ ‡ç­¾ï¼š
- `y_dir(t,h) = 1  (å½“ r(t,h) > 0)`
- `y_dir(t,h) = 0  (å¦åˆ™)`

è¾“å‡ºï¼š
- `P(up)`
- `P(down) = 1 - P(up)`

é¢„æµ‹çª—å£ï¼ˆHorizonsï¼‰
- **å°æ—¶çº§**ï¼š1h / 2h / 4h
- **æ—¥çº¿çº§**ï¼š1d / 3d / 7dï¼ˆå¯é€‰ 30dï¼‰

---

### ä»»åŠ¡ 2ï¼šå¯åŠ¨æ—¶é—´çª—å£é¢„æµ‹ï¼ˆStart Time Window Predictionï¼Œå¤šåˆ†ç±»ï¼‰
ç›®æ ‡ï¼šé¢„æµ‹æœªæ¥å“ªä¸ªæ—¶é—´çª—æœ€å¯èƒ½åŒ…å«**ç¬¬ä¸€æ¬¡æ˜¾è‘—æ³¢åŠ¨/æ˜¾è‘—èµ°åŠ¿å¯åŠ¨**ã€‚

#### 2.1 å¯åŠ¨äº‹ä»¶å®šä¹‰ï¼ˆæ•°æ®é©±åŠ¨é˜ˆå€¼ï¼‰
- è®¡ç®—æœªæ¥ç´¯è®¡æ”¶ç›ŠçŽ‡ `r(t,k)`ï¼ˆk ä¸ºæœªæ¥æ­¥æ•°ï¼šå°æ—¶/å¤©ï¼‰
- å®šä¹‰é˜ˆå€¼ `thr`ï¼ˆç”¨åŽ†å²åˆ†ä½æ•°è‡ªåŠ¨è®¾å®šï¼Œé¿å…çŒœæµ‹ï¼‰ï¼š
  - **å°æ—¶çº§**ï¼šåŽ†å² 1H `|r|` çš„ 80% åˆ†ä½æ•° â†’ `thr_h`
  - **æ—¥çº¿çº§**ï¼šåŽ†å² 1D `|r|` çš„ 80% åˆ†ä½æ•° â†’ `thr_d`
- å¯åŠ¨æ—¶é—´ï¼š
  - `Ï„ = min { k : |r(t,k)| â‰¥ thr }`
- è‹¥åœ¨ç›®æ ‡ horizon å†…éƒ½æœªè§¦å‘ï¼Œåˆ™è®°ä¸º `no_start`

#### 2.2 çª—å£åˆ†æ¡¶ï¼ˆWindow binsï¼‰
**å°æ—¶çº§ï¼ˆç›®æ ‡ 4 å°æ—¶å†…ï¼‰**
- `W0: no_start`
- `W1: 0â€“1h`
- `W2: 1â€“2h`
- `W3: 2â€“4h`

**æ—¥çº¿çº§ï¼ˆç›®æ ‡ 7 å¤©å†…ï¼‰**
- `W0: no_start`
- `W1: 0â€“1d`
- `W2: 1â€“3d`
- `W3: 3â€“7d`

è¾“å‡ºï¼ˆMVPï¼‰ï¼š
- æ¦‚çŽ‡ `P(W0..W3)`
- Top-1 çª—å£ï¼ˆæ¦‚çŽ‡æœ€å¤§è€…ï¼‰

---

### ä»»åŠ¡ 3ï¼šå¹…åº¦/åŒºé—´é¢„æµ‹ï¼ˆMagnitude / Interval Predictionï¼Œåˆ†ä½æ•°å›žå½’ï¼‰
ç›¸æ¯”å•ç‚¹é¢„æµ‹ï¼Œæœ¬é¡¹ç›®è¾“å‡º**åŒºé—´**æ›´è´´è¿‘çœŸå®žä½¿ç”¨ã€‚

#### 3.1 MVPï¼šæ”¶ç›ŠçŽ‡åˆ†ä½æ•°åŒºé—´
ç›®æ ‡ï¼š
- `y_ret(t,h) = r(t,h)`

é¢„æµ‹ï¼š
- `q10 / q50 / q90`

è®­ç»ƒï¼š
- åˆ†ä½æ•°å›žå½’ï¼ˆLightGBM quantile objectiveï¼‰
- ä½¿ç”¨ **Pinball Lossï¼ˆåˆ†ä½æ•°æŸå¤±ï¼‰**ï¼š
  - `L_q(y, Å·) = max( q*(y-Å·), (q-1)*(y-Å·) )`

åŒºé—´è¯„ä¼°ï¼ˆå¿…é¡»æŠ¥å‘Šï¼‰ï¼š
- **Coverage**ï¼šçœŸå®žå€¼è½åœ¨ `[q10, q90]` çš„æ¯”ä¾‹ï¼ˆç›®æ ‡çº¦ 80%ï¼‰
- **Width**ï¼š`mean(q90 - q10)`ï¼ˆè¶Šçª„è¶Šå¥½ï¼Œä½†éœ€å…¼é¡¾ coverageï¼‰

#### 3.2 å¯é€‰å¢žå¼ºï¼ˆæ›´è´´è¿‘â€œç›®æ ‡ä»·â€ï¼‰
é¢„æµ‹æœªæ¥çª—å£å†… High/Low ç›¸å¯¹å½“å‰ Close çš„å˜åŒ–ï¼š
- `y_high(t,h) = (max High(next h) - Close[t]) / Close[t]`
- `y_low(t,h)  = (min Low(next h)  - Close[t]) / Close[t]`

---

## 5ï¼‰æ•°æ®æ–¹æ¡ˆï¼ˆCrypto + Aè‚¡ + ç¾Žè‚¡ï¼‰
### 5.1 æ•°æ®ç²’åº¦
- å°æ—¶çº§åˆ†æ”¯ï¼š1H OHLCV
- æ—¥çº¿çº§åˆ†æ”¯ï¼š1D OHLCV

### 5.2 æ•°æ®æºï¼ˆä¼˜å…ˆçº§ï¼‰
- **åŠ å¯†ï¼ˆBTC/ETH/SOLï¼‰**ï¼šBinance/Bybit APIï¼ˆæˆ– ccxtï¼‰ï¼Œå¤‡é€‰ï¼šCoinGecko
- **ç¾Žè‚¡**ï¼šYahoo Financeï¼ˆæ—¥çº¿ç¨³å®šï¼‰ï¼Œå¯é€‰ï¼šPolygon/Alpaca
- **ä¸­å›½ A è‚¡**ï¼šAkShare / TuShare

### 5.3 æ—¶åŒº & äº¤æ˜“æ—¥åŽ†è§„åˆ™ï¼ˆéžå¸¸é‡è¦ï¼‰
#### æ—¶åŒºè§„åˆ™ï¼ˆå±•ç¤º/å¸‚åœºæƒ¯ä¾‹ï¼‰
- **åŠ å¯†ï¼ˆCryptoï¼‰**ï¼š`Asia/Shanghai`ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
- **ä¸­å›½ A è‚¡**ï¼š`Asia/Shanghai`ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
- **ç¾Žè‚¡**ï¼š`America/New_York`ï¼ˆç¾Žä¸œæ—¶é—´ï¼‰

#### å­˜å‚¨ vs å±•ç¤ºï¼ˆå·¥ç¨‹å®žè·µï¼‰
- å­˜å‚¨ç»Ÿä¸€ä½¿ç”¨ï¼š`timestamp_utc`ï¼ˆé¿å…å¤ä»¤æ—¶/è·¨æ—¶åŒº bugï¼‰
- UI å±•ç¤ºç”Ÿæˆï¼š`timestamp_market`
  - Crypto + Aè‚¡ â†’ åŒ—äº¬æ—¶é—´
  - ç¾Žè‚¡ â†’ ç¾Žä¸œæ—¶é—´
- Dashboard å¿…é¡»æ˜Žç¡®æ ‡æ³¨æ—¶åŒºã€‚

#### äº¤æ˜“æ—¥åŽ†å¯¹é½ï¼ˆå…³é”®å·®å¼‚ï¼‰
- **åŠ å¯†**ï¼š24/7 è¿žç»­ï¼›å°æ—¶çº§åº”è¡¥é½è¿žç»­å°æ—¶ç´¢å¼•
- **Aè‚¡**ï¼šäº¤æ˜“æ—¥åŽ† + åˆä¼‘ï¼ˆ09:30â€“11:30ï¼Œ13:00â€“15:00ï¼ŒåŒ—äº¬æ—¶é—´ï¼‰
  - å°æ—¶çº§ï¼šåªä¿ç•™äº¤æ˜“æ—¶æ®µ barsï¼ˆé¿å…â€œä¼ªé€ åˆä¼‘Kçº¿â€ï¼‰
  - æ—¥çº¿çº§ï¼šä»…äº¤æ˜“æ—¥ï¼ˆä¸è¡¥å‘¨æœ«/èŠ‚å‡æ—¥ï¼‰
- **ç¾Žè‚¡**ï¼šäº¤æ˜“æ‰€æ—¥åŽ† + å¤ä»¤æ—¶ï¼ˆDSTï¼‰
  - æ—¥çº¿ï¼šä»…äº¤æ˜“æ—¥
  - å­˜ UTCã€å±•ç¤º Easternï¼Œé¿å… DST è¾¹ç•Œé”™è¯¯
  - ä½¿ç”¨å¯é äº¤æ˜“æ‰€æ—¥åŽ†åº“è¿›è¡Œå¯¹é½

### 5.4 æ•°æ®è´¨é‡ç­–ç•¥ï¼ˆData qualityï¼‰
- è¡¥é½ç¼ºå¤±æ—¶é—´æˆ³ï¼›ä¼˜å…ˆé‡æ–°æ‹‰å–ç¼ºå¤±åŒºé—´
- é¿å…æ’å€¼ä¼ªé€  OHLCï¼›ç”¨ `missing_flag` æˆ–ä¸¢å¼ƒå—å½±å“æ ·æœ¬
- ä¸ä¿®æ”¹ raw pricesï¼›å¦‚éœ€ç¨³å¥å¤„ç†ä»…å¯¹â€œç‰¹å¾â€åš winsorize
- æ¯æ¬¡æ›´æ–°ç”Ÿæˆ `data_quality_report`ï¼š
  - latest timestampã€missing%ã€duplicates%ã€anomaly flags

---

## 6ï¼‰ç‰¹å¾å·¥ç¨‹ï¼ˆFeature Engineeringï¼‰
### 6.1 åŽŸåˆ™
- åªç”¨ `t` æ—¶åˆ»å¯è§ä¿¡æ¯ï¼ˆæ— æ³„éœ²ï¼‰
- å…±äº«ç‰¹å¾æ¡†æž¶ï¼Œé  config æŽ§åˆ¶çª—å£ï¼ˆhourly/daily ä¸åŒï¼‰
- MVP ä¼˜å…ˆå¯è§£é‡Šæ€§ï¼ˆæ ‘æ¨¡åž‹ï¼‰

### 6.2 ç‰¹å¾ç»„
#### Returns & Momentum
- log returns
- lag returns
  - Hourlyï¼š1/2/4/12/24
  - Dailyï¼š1/3/7/14
- rolling mean returns
  - Hourlyï¼š24/72/168
  - Dailyï¼š7/30/90

#### Trend
- EMAï¼š8/20/55/144/233
- MACDï¼ˆline/signal/histogramï¼‰

#### Volatility
- rolling std of returns
- ATR
- Bollinger Band width

#### Volume
- volume change rate
- volume MA
- ï¼ˆå¯é€‰ï¼‰OBV

#### Time features
- Hourlyï¼šhour_of_day, day_of_week
- Dailyï¼šday_of_week, monthï¼ˆå¯é€‰ï¼‰

### 6.3 é˜²æ­¢æ•°æ®æ³„éœ²ï¼ˆLeakage preventionï¼‰
- æŒ‡æ ‡/æ»šåŠ¨ç»Ÿè®¡ä»…ä½¿ç”¨ `â‰¤ t` çš„æ•°æ®è®¡ç®—
- Scalingï¼š
  - åªåœ¨è®­ç»ƒ fold ä¸Š fit
  - æµ‹è¯• fold åª transform
- ä»…å…è®¸æ—¶é—´åºåˆ—åˆ‡åˆ†ï¼ˆç¦æ­¢éšæœºæ‰“ä¹±ï¼‰

---

## 7ï¼‰æ¨¡åž‹æ ˆï¼ˆBaseline / MVP / Advancedï¼‰
### 7.1 Baselineï¼ˆå¿…é¡»å®žçŽ°ï¼‰
**æ–¹å‘**
- Naiveï¼šé¢„æµ‹ä¸Žä¸Šä¸€æ ¹ bar åŒæ–¹å‘
- Logistic Regressionï¼ˆ`class_weight="balanced"`ï¼‰

**å¯åŠ¨çª—å£**
- Most-frequent-class baseline
- Multinomial Logistic Regressionï¼ˆsoftmaxï¼‰

**å¹…åº¦**
- Naiveï¼šreturn = 0
- ï¼ˆå¯é€‰ï¼‰Linear Regression

### 7.2 MVPï¼ˆä¸»åŠ›æ¨¡åž‹ï¼‰
**LightGBM / XGBoost**
- æ–¹å‘ï¼šLGBMClassifier
- å¯åŠ¨çª—å£ï¼šLGBMClassifierï¼ˆå¤šåˆ†ç±»ï¼‰
- å¹…åº¦åŒºé—´ï¼šQuantile LightGBMï¼ˆq10/q50/q90 åˆ†åˆ«è®­ç»ƒï¼‰

**ä¸ºä½• MVP ç”¨ LightGBM**ï¼šè®­ç»ƒå¿«ã€ç¨³å®šã€å¯è§£é‡Šã€å·¥ç¨‹é£Žé™©ä½Žã€‚

### 7.3 Advancedï¼ˆå¯é€‰ï¼‰
**Temporal Fusion Transformerï¼ˆTFTï¼‰**
- æ“…é•¿ multi-horizon forecasting
- å¯è§£é‡Šæ€§æ›´å¼ºï¼ˆvariable selection / attentionï¼‰
- ä¼˜å…ˆä»Ž Daily åˆ†æ”¯å¼€å§‹ï¼ˆå™ªå£°æ›´å°ï¼‰
- æŽ¨èæ¡†æž¶ï¼šPyTorch Forecasting + PyTorch Lightning

---

## 8ï¼‰å¤šä»»åŠ¡ç­–ç•¥ï¼ˆMulti-Task Strategyï¼‰
**MVP å†³ç­–ï¼šåˆ†ä»»åŠ¡è®­ç»ƒï¼ˆå¼ºåˆ¶å†™æ­»ï¼‰**
- å•ç‹¬è®­ç»ƒ direction æ¨¡åž‹
- å•ç‹¬è®­ç»ƒ start-window æ¨¡åž‹
- åˆ†ä½æ•° q10/q50/q90 åˆ†åˆ«è®­ç»ƒ

ä¼˜ç‚¹ï¼šè°ƒè¯•ç®€å•ã€æŒ‡æ ‡æ¸…æ™°ã€äº¤ä»˜å¯æŽ§ã€‚

**Advancedï¼ˆå¯é€‰ï¼‰ï¼šTFT å¤šä»»åŠ¡å¯¹æ¯”**
- å…±äº« encoder + åˆ† headï¼ˆdirection/start/quantilesï¼‰ï¼Œä»…ä½œä¸ºå¯¹æ¯”å®žéªŒã€‚

---

## 9ï¼‰è¶…å‚æ•°è°ƒå‚ï¼ˆOptuna + Early Stoppingï¼‰
- å·¥å…·ï¼šOptunaï¼ˆå¤‡é€‰ï¼šrandom searchï¼‰
- é¢„ç®—ï¼ˆå›ºå®šï¼‰ï¼š
  - Dailyï¼š30â€“50 trials
  - Hourlyï¼š20â€“30 trials
- å…ˆåœ¨å°è§„æ¨¡ time-split å­é›†å¿«é€Ÿæ‰“åˆ†ï¼Œå†ç”¨æœ€ä½³å‚æ•°è·‘å®Œæ•´ walk-forward

LightGBM æœç´¢ç©ºé—´ç¤ºä¾‹ï¼š
- num_leavesï¼š16â€“256
- max_depthï¼š-1â€“16
- learning_rateï¼š1e-3â€“0.2ï¼ˆlog-scaleï¼‰
- min_data_in_leafï¼š20â€“500
- feature_fractionï¼š0.5â€“1.0
- bagging_fractionï¼š0.5â€“1.0
- lambda_l1 / lambda_l2ï¼š0â€“5

Early stoppingï¼š
- early_stopping_rounds = 100
- num_boost_round â‰¤ 5000

---

## 10ï¼‰ç±»åˆ«ä¸å¹³è¡¡ + æ¦‚çŽ‡æ ¡å‡†ï¼ˆImbalance + Calibrationï¼‰
**ä¸å¹³è¡¡**
- Logisticï¼š`class_weight="balanced"`
- LightGBMï¼š
  - binaryï¼š`scale_pos_weight`
  - multiclassï¼šsample weights / class weights

**æ ¡å‡†ï¼ˆå¯¹æœ€ç»ˆæ¨¡åž‹åšï¼‰**
- Platt scalingï¼ˆsigmoidï¼‰æˆ– Isotonic
- æŠ¥å‘Šï¼šBrier score
- ï¼ˆå¯é€‰ï¼‰reliability diagram / ECE

---

## 11ï¼‰åŒºé—´é¢„æµ‹ç»†èŠ‚ï¼ˆInterval Prediction Detailsï¼‰
- q10/q50/q90 åˆ†åˆ«è®­ç»ƒ
- è‹¥å‡ºçŽ°åˆ†ä½æ•°äº¤å‰ï¼ˆq10 > q50 ç­‰ï¼‰ï¼š
  - ç®€å•åŽå¤„ç†ï¼šå¯¹ (q10,q50,q90) æŽ’åº

æŠ¥å‘Šï¼š
- Coverageï¼ˆ[q10,q90]ï¼‰
- Widthï¼ˆmean(q90-q10)ï¼‰

---

## 12ï¼‰è¯„ä¼°åè®®ï¼ˆWalk-Forward Evaluationï¼‰
### 12.1 Walk-forward è®¾ç½®
- expanding æˆ– rolling window
- åŠ å…¥ gap/purge é˜²æ­¢ horizon é‡å æ³„éœ²ï¼š
  - gap = max horizonï¼ˆHourly: 4 barsï¼›Daily: 7 barsï¼‰
- ä¿å­˜é€ fold æŒ‡æ ‡åˆ° `metrics.csv`

### 12.2 æŠ¥å‘ŠæŒ‡æ ‡ï¼ˆå¿…é¡»ï¼‰
**æ–¹å‘**
- Accuracy, Precision, Recall, F1, ROC-AUC

**å¯åŠ¨çª—å£**
- Top-1 accuracy
- Top-2 accuracy
- ï¼ˆå¯é€‰ï¼‰Macro-F1

**å¹…åº¦**
- MAE / RMSE / Pinball loss
- ï¼ˆå¯é€‰ï¼‰sign accuracy

**åŒºé—´**
- Coverage
- Width

---

## 13ï¼‰åŠ åˆ†ï¼šè½»é‡å›žæµ‹ï¼ˆä¸åšå®žç›˜ï¼‰
æœ€å°ä¿¡å·è§„åˆ™ï¼š
- P(up) > 0.55 â†’ Long
- P(up) < 0.45 â†’ Short
- å¦åˆ™ Flat

çœŸå®žæ„Ÿï¼š
- æ‰‹ç»­è´¹ bpsã€æ»‘ç‚¹ bps
- æ‰§è¡Œå»¶è¿Ÿï¼šä¿¡å·åœ¨ t äº§ç”Ÿï¼Œt+1 æ‰§è¡Œ

æŠ¥å‘Šï¼š
- total return, max drawdown, Sharpe
- win rate, profit factor
- å¯¹æ¯” baselineï¼ˆbuy&holdã€å‡çº¿ç­–ç•¥ï¼‰

---

## 14ï¼‰å·¥ç¨‹å®žçŽ°ï¼ˆEngineering Implementationï¼‰
### 14.1 ä»“åº“ç»“æž„
Forecast/
â”œâ”€â”€ data/
â”‚ â”œâ”€â”€ raw/
â”‚ â”œâ”€â”€ processed/
â”‚ â””â”€â”€ models/
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ ingestion/
â”‚ â”œâ”€â”€ preprocessing/
â”‚ â”œâ”€â”€ features/
â”‚ â”œâ”€â”€ labels/
â”‚ â”œâ”€â”€ models/
â”‚ â”œâ”€â”€ evaluation/
â”‚ â””â”€â”€ utils/
â”œâ”€â”€ dashboard/Streamlit
â”œâ”€â”€ configs/config.yaml
â””â”€â”€ README.md


### 14.2 Pipeline å‘½ä»¤
- `python -m src.ingestion.update_data --config configs/config.yaml`
- `python -m src.features.build_features --config ...`
- `python -m src.labels.build_labels --config ...`
- `python -m src.models.train --config ...`
- `python -m src.models.predict --config ...`
- `python -m src.markets.snapshot --config ...`
- `python -m src.evaluation.walk_forward --config ...`
- `streamlit run dashboard/app.py`

### 14.3 è°ƒåº¦ï¼ˆMVPï¼‰
- cron æˆ– APScheduler
- æ¯æ—¥æ›´æ–° + ç”Ÿæˆæœ€æ–°é¢„æµ‹

### 14.4 ç‰ˆæœ¬ç®¡ç†ï¼ˆModel/version managementï¼‰
- æŒ‰æ—¶é—´æˆ³ä¿å­˜ï¼š
  - `data/models/2026-02-05_hourly/`
  - `data/models/2026-02-05_daily/`
- ä¿å­˜äº§ç‰©ï¼š
  - model.pkl
  - config_snapshot.yaml
  - metrics.json
  - git commit hash

---

## 15ï¼‰Dashboardï¼ˆæ¼”ç¤ºç»“æž„ï¼‰
**é¡¶éƒ¨ï¼šå¤šå¸‚åœºå¿«ç…§ï¼ˆCrypto / Aè‚¡ / ç¾Žè‚¡ï¼‰**
- æ¯ä¸ªå¸‚åœºè‡³å°‘å±•ç¤ºä»¥ä¸‹å››é¡¹ï¼š
  - å½“å‰ä»·æ ¼ï¼ˆCurrent Priceï¼‰
  - é¢„æµ‹ä»·æ ¼ï¼ˆPredicted Priceï¼‰
  - é¢„æµ‹å¹…åº¦ï¼ˆPredicted Changeï¼‰
  - é¢„æœŸæ—¥æœŸï¼ˆExpected Dateï¼‰
- æ”¯æŒå¯é€‰è‚¡ç¥¨æ± ä¸Žæ ‡çš„ï¼š
  - Cryptoï¼š`BTC / ETH / SOL` + `å¸‚å€¼å‰100ï¼ˆå‰”é™¤ç¨³å®šå¸ï¼Œå¦‚ USDT/USDCï¼‰`
  - Aè‚¡ï¼š`ä¸Šè¯æŒ‡æ•°æˆåˆ†è‚¡`ã€`æ²ªæ·±300æˆåˆ†è‚¡`
  - ç¾Žè‚¡ï¼š`é“ç¼æ–¯30`ã€`çº³æ–¯è¾¾å…‹100`ã€`æ ‡æ™®500`
- ä»·æ ¼è§„åˆ™ï¼š
  - **åŠ å¯†å¸‚åœºå½“å‰ä»·æ ¼å¿…é¡»ä½¿ç”¨å®žæ—¶ tickerï¼ˆéžæ”¶ç›˜ä»·ï¼‰**
  - Aè‚¡/ç¾Žè‚¡ä¼˜å…ˆä½¿ç”¨è¡Œæƒ… API æœ€æ–°ä»·ï¼›è‹¥å®žæ—¶ä¸å¯ç”¨ï¼Œæ˜Žç¡®æ ‡æ³¨ä¸ºæœ€æ–°å¯å¾—ä»·

**å·¦åˆ—ï¼šHourlyï¼ˆ1h/2h/4hï¼‰**
- P(up)/P(down) å¡ç‰‡
- å¯åŠ¨çª—å£æ¦‚çŽ‡
- q10â€“q90 åŒºé—´
- å›¾ï¼šä»·æ ¼ + åŒºé—´å¸¦

**å³åˆ—ï¼šDailyï¼ˆ1d/3d/7dï¼‰**
- åŒæ ·è¾“å‡º

**åº•éƒ¨ï¼šæ€§èƒ½**
- baseline vs MVP æŒ‡æ ‡è¡¨
- åŒºé—´ coverage/width
- ï¼ˆå¯é€‰ï¼‰feature importance / SHAP

---

## 16ï¼‰å‘¨è®¡åˆ’ï¼ˆW1â€“W8ï¼‰
- **W1**ï¼šæ•°æ®æŽ¥å…¥ + æ—¶åŒºå¯¹é½ + è´¨é‡æŠ¥å‘Š
- **W2**ï¼šFeatures v1 + Labels v1ï¼ˆæ— æ³„éœ²ï¼‰
- **W3**ï¼šBaselines + walk-forward v1ï¼ˆç”Ÿæˆå¯å¤çŽ° metrics.csvï¼‰
- **W4**ï¼šMVP åˆ†ç±»ï¼ˆLightGBMï¼‰+ baseline å¯¹æ¯”
- **W5**ï¼šQuantile LightGBMï¼ˆq10/q50/q90ï¼‰+ coverage/width
- **W6**ï¼šDashboard v1ï¼ˆå¯æ¼”ç¤ºï¼‰
- **W7**ï¼šå›žæµ‹ + 2â€“3 æ®µ case studiesï¼ˆè§£é‡Šå¯¹/é”™åŽŸå› ï¼‰
- **W8**ï¼šæœ€ç»ˆå®Œå–„ + README ä¸€é”®å¤çŽ°

---

## 17ï¼‰é£Žé™©ä¸Žåº”å¯¹ï¼ˆRisks & Mitigationï¼‰
- å°æ—¶çº§å™ªå£°å¤§ï¼šä¼˜å…ˆå®Œæˆ Daily MVPï¼Œå†æ‰©å±• Hourly
- é˜ˆå€¼æ•æ„Ÿï¼šåˆ†ä½æ•°é˜ˆå€¼ + æ•æ„Ÿæ€§æ£€æŸ¥
- æ³„éœ²é£Žé™©ï¼šä¸¥æ ¼ walk-forward + gap/purge + æ¯ fold scaler ç‹¬ç«‹ fit
- èŒƒå›´è†¨èƒ€ï¼šTFT å¯é€‰ï¼›MVP ä¿è¯å¯äº¤ä»˜

---

## 18ï¼‰æŠ€æœ¯æ ˆä¸Žå¯å¤çŽ°ï¼ˆTech Stack + Reproducibilityï¼‰
**æ ¸å¿ƒ**
- Python, pandas, numpy
- requests / ccxt
- ta / pandas_ta
- scikit-learn
- lightgbm / xgboost
- streamlit + plotly/matplotlib
- git + config.yaml
- cron / APScheduler

**é«˜çº§ï¼ˆå¯é€‰ï¼‰**
- TFTï¼šPyTorch Forecasting + PyTorch Lightning

## 19) Quant Factors (Implemented in MVP)
- Risk factors: market cap (size), value (earnings/book proxy), growth (fundamental growth or 90d return proxy).
- Market behavior factors: momentum (20d return), reversal (-5d return), low volatility (-20d return std).
- For symbols without fundamentals (common in crypto), factors fall back to transparent price-based proxies and source labels are displayed in dashboard.
