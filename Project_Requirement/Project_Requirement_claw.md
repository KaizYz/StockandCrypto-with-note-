# StockAndCrypto: 智能投资预测与交易决策系统

**项目负责人**: [你的名字]
**邮箱**: [你的邮箱]
**指导教师**: [教师名字]
**教师邮箱**: [教师邮箱]

---

## B. Project Overview / 项目背景与概述

本项目旨在解决投资场景中"预测与执行脱节"的常见问题：当市场（例如标普 500 或个股）出现突然的大涨大跌时，许多用户无法在短时间内理解走势背后的信号含义，也难以把零散的信息转化为可执行的操作决策，从而错过行情或在不确定中做出高风险选择。因此，本项目的重点不在于单纯展示行情，而是提供一个明确、可解释、可复用的决策流程：将市场数据转化为用户能理解的预测结论，并进一步映射为清晰的交易计划与风险控制框架，帮助用户以系统化方式进行分析与决策。我选择该主题的原因是希望完成一个端到端、面向真实使用场景的数据驱动系统，并把"从数据到决策"的全过程落地为一个对实际交易者有价值的工具。

---

## C. User Requirements / 用户需求

本项目的最小可行产品（MVP）是一套跨市场的预测与交易决策看板，能够接入实时与历史行情数据，并输出可解释的预测结果与可执行的交易计划。预测输出至少包含方向性判断（例如上涨/下跌倾向及其概率）与价格区间或波动范围估计，同时系统需要把预测结果映射为可操作的计划要素，例如建议入场区间、止损位置、止盈目标与盈亏比，并在界面中明确呈现当前推荐动作状态（做多、做空或观望），以减少用户理解成本并避免"看懂了但不知道怎么做"的断点。

MVP 必须至少覆盖三个市场：加密资产、A 股与美股，并提供基础的信号验证与回测指标，使用户能够判断该信号是否具有一定一致性与可用性，而不是随机猜测。系统还应包含一个交易记录/计划笔记模块，用于记录交易想法、执行依据与复盘结论；当用户不需要交易记录时，该模块也可以作为通用笔记使用。为支持协作与交流，系统应允许用户以链接或网页方式分享自己的交易计划或笔记内容，便于他人查看与讨论。

在用户类型方面，普通用户（新手）主要追求"快速结论与可执行性"。代表性用户故事包括：作为新手用户，我希望在打开页面后的几秒内看到"是否可执行"以及对应的下单计划要素（入场、止损、止盈），从而在信息过载时仍能快速做出相对稳健的选择；作为新手用户，我希望系统能用清晰的风险提示与动作状态（做多/做空/观望）降低误操作概率，从而避免因为看不懂形态或指标而做出冲动交易。进阶用户则更关注可比较性、稳定性与筛选效率。代表性用户故事包括：作为进阶用户，我希望看到机会强度、风险调整得分与预测置信度等可量化指标，从而在多个标的之间进行筛选与排序；作为进阶用户，我希望查看基础回测表现与历史命中情况，从而评估该信号在不同市场与不同阶段的稳定性并决定是否采用。

MVP 之外的目标包括：更完整的研究与筛选工作台、纸上交易（模拟执行）与自动化记录、预测理由解释与"风控阻断原因"提示等增强模块，并可扩展到按资产类别划分的讨论区或群聊（如外汇、贵金属、加密、股票），为不同偏好的用户提供更匹配的交流场景。本项目不会复用其他课程代码，所有外部组件与数据来源将在文档中明确披露。

---

## D. Design Choices / 技术路线与设计选择

本项目可以采用多种实现路线，每种路线在开发效率、可解释性、实时性与可维护性方面各有取舍。以下从数据处理与建模、前端与交互、数据存储、部署方案四个维度进行多方案对比分析。

### D.1 数据处理与建模层面的技术选择

在特征工程与数据处理方面，本项目需要从原始行情数据中提取具有预测能力的特征，核心技术栈包括 Pandas（数据清洗与转换）、NumPy（数值计算）、Scikit-learn（特征选择与评估）。这三种工具的组合能够满足特征构建、交叉验证与模型评估的需求，并且与后续的机器学习模型有良好的兼容性。

在机器学习模型层面，经过综合评估，本项目选择 LightGBM 和 XGBoost 作为核心预测模型。LightGBM 具备训练速度快、内存效率高、支持类别特征等优势，适合处理大规模市场数据；XGBoost 在稳定性与可解释性方面表现优异，且拥有成熟的特征重要性分析方法，便于输出预测理由。两者的集成使用可以提升预测的稳健性，同时支持特征重要性对比分析，为用户提供可解释的预测依据。相比之下，传统统计模型（如 ARIMA、Prophet）在捕捉非线性关系方面能力有限，而深度学习模型（如 LSTM、Transformer）虽然能够处理时序依赖，但需要更大的数据量与计算资源，且可解释性较差，难以满足"可解释预测"的核心需求。因此，LightGBM 与 XGBoost 的组合在预测性能、开发效率与可解释性之间取得了最佳平衡。

在金融数据获取方面，本项目选择 akshare 库作为 A 股与部分国际市场数据的主要来源。akshare 封装了东方财富、同花顺等国内主流金融数据接口，能够免费获取股票、ETF、指数等资产的实时与历史行情数据，且接口稳定、文档清晰。相比之下，tushare 虽然用户基数大但需要积分限制，yfinance 主要覆盖美股市场，eastmoney 接口需要额外的请求封装工作。综合考虑数据覆盖范围、免费可用性与接口稳定性，akshare 是当前阶段的最优选择。

### D.2 前端与交互层面的技术选择

在用户界面开发方面，本项目选择 Streamlit 作为核心前端框架。Streamlit 能够将 Python 脚本快速转换为交互式 Web 应用，与后端的数据处理和机器学习代码无缝衔接，大幅降低前端开发成本。对于 MVP 阶段需要快速验证核心流程的目标而言，Streamlit 提供了足够的组件支持（表格、图表、表单、侧边栏导航等），并且支持响应式布局与深色主题，能够满足基本的用户体验需求。

Plotly 作为可视化库与 Streamlit 配合使用，提供交互式图表（K 线图、收益率曲线、回测分析图等），支持缩放、平移、数据点悬停查看等交互操作，便于用户深入分析市场数据与回测结果。相比 Matplotlib 的静态图，Plotly 的交互性更强；相比 Bokeh，Plotly 的语法更简洁、文档更完善，且与 Streamlit 有良好的集成。

在前端状态管理方面，Streamlit 的 Session State 机制能够满足单用户场景下的状态保持需求，包括用户登录状态、笔记编辑内容、聊天消息缓存等。对于后续可能的多用户实时协作场景（如群聊、共享笔记），项目预留了 WebSocket 扩展能力，可在需要时引入 Flask-SocketIO 或 FastAPI 的 WebSocket 支持。

### D.3 数据存储层面的技术选择

在本地开发阶段，本项目采用 SQLite 作为关系型数据库。SQLite 是轻量级嵌入式数据库，无需独立服务器进程，部署简单且与 Python 标准库集成良好，适合 MVP 阶段的快速迭代与单机使用场景。数据表结构通过 SQLAlchemy ORM 进行管理，便于后续迁移到 PostgreSQL 等生产级数据库。

在生产环境部署方面，本项目选择 Supabase 作为云端数据库与认证服务。Supabase 是开源的 Firebase 替代方案，基于 PostgreSQL 构建，提供数据库存储、用户认证（Email/Password、OAuth）、实时订阅、API 自动生成等功能。其免费 tier 能够满足小规模用户的使用需求，且支持 Row Level Security（RLS）实现细粒度的数据访问控制。Supabase 的 JavaScript 与 Python 客户端库成熟，集成成本低，能够满足多用户认证、数据持久化与后续的实时协作功能扩展需求。

在笔记与交易记录的数据结构设计方面，项目采用关系型表结构实现用户、笔记、点赞、板块、消息、表情反应等多表关联，确保数据一致性与查询效率。相较于 NoSQL（如 MongoDB）方案，关系型数据库在复杂查询（如跨用户的笔记搜索、消息历史检索）与事务支持方面更具优势，符合金融数据对准确性的高要求。

### D.4 部署与运维层面的技术选择

在云端部署方面，本项目选择 Streamlit Cloud 作为前端应用的托管平台。Streamlit Cloud 与 GitHub 仓库直接集成，支持从代码提交到自动部署的 CI/CD 流程，且对开源项目提供免费托管。对于 Streamlit 应用而言，Streamlit Cloud 提供了开箱即用的运行环境与域名绑定，无需额外的容器编排或服务器配置，大幅降低了部署运维成本。

在后端服务方面，项目采用 Supabase 的 API 接口替代传统的自建后端服务。Supabase 提供自动生成的 RESTful API 与 GraphQL 接口，支持数据的增删改查操作；同时提供实时订阅功能，可通过 WebSocket 推送数据变更通知。这种"无服务器"架构减少了后端服务器的运维负担，使团队能够专注于核心预测与交互逻辑的开发。

在开发环境管理方面，项目使用 Python venv 进行虚拟环境隔离，通过 requirements.txt 文件管理依赖包版本。关键依赖包括 streamlit（前端框架）、pandas/numpy/scikit-learn（数据处理）、lightgbm/xgboost（机器学习模型）、supabase（云端数据库客户端）、akshare（金融数据获取）。

### D.5 外部组件与数据来源

本项目需要依赖外部数据接口获取行情与标的信息，预计外部组件占整体实现的约 10%至 20%，核心逻辑（特征工程、预测生成、信号规则、风险控制映射与界面呈现）将由项目自主实现。数据来源包括：

| 市场 | 数据源 | 接口类型 | 链接 |
|------|--------|----------|------|
| 加密货币 | Binance | REST API（公共） | https://api.binance.com/api/v3/klines |
| 美股 | Yahoo Finance | REST API | https://query1.finance.yahoo.com/v8/finance/chart/ |
| A股 | 东方财富（akshare） | Python 库 | https://akshare.xyz/ |
| 加密货币 | CoinGecko（备用） | REST API | https://www.coingecko.io/ |

这些接口主要提供原始数据与基础字段，本项目将在其基础上完成全部预测与决策映射，并在实现中考虑接口限频、稳定性与数据一致性等风险。所有外部依赖的版本与来源将在 requirements.txt 与技术文档中明确记录。

---

## E. Project Timeline / 项目时间线

以下时间线包含本项目的里程碑任务与课程作业截止日期，确保各阶段目标明确、可追踪。

### E.1 项目核心里程碑

| 阶段 | 任务描述 | 目标日期 | 状态 |
|------|----------|----------|------|
| Phase 1：基础架构搭建 | 完成项目结构设计、数据流定义、技术栈选型确认 | 2026-02-20 | 已完成 |
| Phase 2：数据获取与预处理 | 实现 Binance、Yahoo Finance、akshare 数据接口对接，完成特征工程流水线 | 2026-03-01 | 进行中 |
| Phase 3：模型训练与评估 | 完成 LightGBM/XGBoost 模型训练，实现回测评估模块 | 2026-03-15 | 待开始 |
| Phase 4：前端界面开发 | 完成 Streamlit 主界面、K 线图表、预测结果展示、交互组件 | 2026-03-25 | 待开始 |
| Phase 5：笔记功能模块 | 实现用户认证、笔记 CRUD、交易日记模板、分享功能 | 2026-04-05 | 待开始 |
| Phase 6：社区与协作功能 | 实现板块群聊、实时消息、点赞互动、计划分享 | 2026-04-15 | 待开始 |
| Phase 7：部署与测试 | 完成 Streamlit Cloud 部署、Supabase 配置、整体测试与优化 | 2026-04-25 | 待开始 |
| Phase 8：项目收尾 | 完善文档、性能优化、最终测试、演示准备 | 2026-05-01 | 待开始 |

### E.2 课程作业截止日期

| 作业 | 内容要求 | 截止日期 | 状态 |
|------|----------|----------|------|
| Project Requirements | 项目需求文档（本文档），包含封面、项目概述、用户需求、技术路线、时间线 | 2026-02-28 | 进行中 |
| Prospectus | 项目计划书（已完成） | 2026-01-15 | 已提交 |
| Mid-Project Report | 中期进展报告，展示已完成的功能、数据流、初步模型结果 | 2026-03-20 | 待开始 |
| Final Project | 完整项目演示，包含可运行的应用、文档、代码仓库 | 2026-05-10 | 待开始 |

### E.3 详细执行计划（按周）

| 周次 | 日期范围 | 主要任务 | 交付物 |
|------|----------|----------|--------|
| Week 1 | 02/24-03/02 | 数据接口对接、基础特征工程 | 数据获取脚本、特征库 |
| Week 2 | 03/03-03/09 | 模型训练、超参数调优、交叉验证 | 训练好的模型、评估报告 |
| Week 3 | 03/10-03/16 | 回测模块开发、风险控制规则实现 | 回测结果、策略评估 |
| Week 4 | 03/17-03/23 | Streamlit 主界面开发、图表集成 | 可交互的前端页面 |
| Week 5 | 03/24-03/30 | 用户认证集成、笔记模块开发 | 用户系统、笔记 CRUD |
| Week 6 | 03/31-04/06 | 交易日记模板、计划分享功能 | 完整笔记功能 |
| Week 7 | 04/07-04/13 | 板块群聊、实时消息、点赞系统 | 社区功能 |
| Week 8 | 04/14-04/20 | 云端部署、Supabase 配置、测试 | 生产环境部署 |
| Week 9 | 04/21-04/27 | 优化、文档完善、演示准备 | 最终版本 |

---

## F. Document Structure / 文档结构说明

本文档按照课程要求的结构组织，包含以下部分：

一、Title Page（封面）：项目名称、负责人信息、指导教师信息

二、Project Overview（项目概述）：项目背景、动机、核心价值主张

三、User Requirements（用户需求）：MVP 定义、用户类型、用户故事、超出 MVP 的目标

四、Design Choices（技术路线与设计选择）：多方案对比分析，涵盖数据处理、前端交互、数据存储、部署运维、外部组件

五、Project Timeline（项目时间线）：核心里程碑、课程截止日期、周度执行计划

六、External Components（外部组件）：数据来源、API 链接、第三方库说明

本文档严格遵循 1.15 行距、12 号字体要求，总页数控制在 2 至 3 页以内（不含封面），所有引用均已标注来源，不使用无序列表条目形式。

---

## G. Reference / 参考资料

一、项目代码仓库：https://github.com/[你的用户名]/StockandCrypto

二、Streamlit 官方文档：https://docs.streamlit.io/

三、LightGBM 文档：https://lightgbm.readthedocs.io/

四、XGBoost 文档：https://xgboost.readthedocs.io/

五、Supabase 文档：https://supabase.com/docs

六、akshare 金融数据接口：https://akshare.xyz/

七、Binance API 文档：https://developers.binance.com/

八、Yahoo Finance API：https://finance.yahoo.com/

---

**文档版本**：1.0

**创建日期**：2026-02-27

**最后更新**：2026-02-27
